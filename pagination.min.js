!function(d){function e(b){this.currentPage=b.currentPage;this.displayPage=5>b.displayPage?5:b.displayPage;this.itemsCount=b.itemsCount;this.pageSize=b.pageSize;this.showCtrl=b.showCtrl;this.onSelect=b.onSelect;this.remote=b.remote}e.prototype={_init:function(b,a){this.hookNode=a;this.hookNode.html('<div class="h-pages"></div>');this._drawHtml();this.showCtrl&&this._onCtrl();this._onSelect()},_drawHtml:function(){var b=this.hookNode.children(".h-pages"),a='<ul class = "pagination fr mt20">';1<=this.currentPage-1?a+='<li><a class="prev" data-page="'+(this.currentPage-1)+'"><img src="static/images/zuo.png"></a></li>':"";if(this.pageSize>this.displayPage)if(this.currentPage<this.displayPage)for(var c=1;c<=this.displayPage;c++)c==this.currentPage?a+='<li><span class="current">'+c+"</span></li>":a+='<li><a class="num" data-page="'+c+'">'+c+"</a></li>";else if(2<this.pageSize-this.currentPage)for(var d=this.currentPage-2,c=d;c<d+this.displayPage;c++)c==this.currentPage?a+='<li><span class="current">'+c+"</span></li>":a+='<li><a class="num" data-page="'+c+'">'+c+"</a></li>";else for(c=this.pageSize-(this.currentPage-1);c<=this.pageSize;c++)c==this.currentPage?a+='<li><span class="current">'+c+"</span></li>":a+='<li><a class="num" data-page="'+c+'">'+c+"</a></li>";else for(c=1;c<=this.pageSize;c++)c==this.currentPage?a+='<li><span class="current">'+c+"</span></li>":a+='<li><a class="num" data-page="'+c+'">'+c+"</a></li>";a+=this.currentPage+1<=this.pageSize?'<li><a class="next" data-page="'+(this.currentPage+1)+'"><img src="static/images/you.png"></a></li></ul>':"</ul>";this.showCtrl&&(a+=this._drawCtrl());b.html(a);return this},_drawCtrl:function(){return"<div>\u3000<span>"+this.itemsCount+"\u6761</span>\u3000<span>\u5171"+this.pageSize+'\u9875</span>\u3000<span>\u3000\u5230\u3000<input type="text" class="page-num"/><button class="page-confirm">\u786e\u5b9a</button>\u9875</span></div>'},_onCtrl:function(){function b(){var b=parseInt(c.find(".page-num").val());d.isNumeric(b)&&b<=a.pageSize&&0<b&&(a.remote||(a.currentPage=b,a._drawHtml()),d.isFunction(a.onSelect)&&a.onSelect.call(d(this),b))}var a=this,c=a.hookNode.children(".h-pages");c.on("click",".page-confirm",function(a){b.call(this)});c.on("keypress",".page-num",function(){13==event.which&&b.call(this)});return this},_onSelect:function(){var b=this;b.hookNode.children(".h-pages").on("click","a",function(a){a.preventDefault();a=parseInt(d(this).attr("data-page"));b.remote||(b.currentPage=a,b._drawHtml());d.isFunction(b.onSelect)&&b.onSelect.call(d(this),a)});return this}};d.fn.Pagination=function(b){b=d.extend({},d.fn.Pagination.defaults,"object"==typeof b&&b);return(new e(b))._init(b,d(this))};d.fn.Pagination.defaults={currentPage:1,displayPage:5,itemsCount:0,pageSize:0,showCtrl:!1,onSelect:!0,remote:!0}}(window.jQuery);
